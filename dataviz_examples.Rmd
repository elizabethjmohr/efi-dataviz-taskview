---
title: "Data Visualization Examples"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE) # Show code and plots

# Load packages
library(tidyverse)
library(cowplot)

# Get forecasts
combined <- read_csv("https://data.ecoforecast.org/analysis/combined_forecasts_scores.csv.gz")
phenoScores <- combined %>% filter(theme == "phenology")
tickScores <- combined %>% filter(theme == "ticks")
aquaticsScores_temp <- combined %>% filter(theme == "aquatics", target == "temperature")
aquaticsScores_oxygen <- combined %>% filter(theme == "aquatics", target == "oxygen")
beetlesScores <- combined %>% filter(theme == "beetles")
terrestrial30minScores <- combined %>% filter(theme == "terrestrial_30min")
terrestrialDailyScores <- combined %>% filter(theme == "terrestrial_daily")
```

```{r loading, warning=FALSE, message=FALSE}
library(tidyverse)
library(palmerpenguins)
library(ggridges)

efi_forecast <- read_csv("https://data.ecoforecast.org/analysis/combined_forecasts_scores.csv.gz")

head(penguins)
```

## Histogram

```{r histogram, fig.cap = "Histogram of scores for freshwater dissolved oxygen forecasts from the EFI NEON Ecological Forecasting Challenge"}

ggplot(aquaticsScores_oxygen, aes(x = crps)) +
  geom_bar()+
  scale_x_binned(limits = c(0,2), n.breaks = 10)+
  theme_cowplot()+
  theme(panel.grid.major.y = element_line())+
  ylab("Number of Forecasts") + 
  xlab("Continuous Ranked Probability Score")
```

## Density Plot

```{r density}
ggplot(aquaticsScores_oxygen, aes(x = crps)) +
  geom_density(bw = 0.05, color = "dodgerblue4", fill = "dodgerblue1")+
  theme_cowplot()+
  xlim(0,2)+
  ylab("Density") + 
  xlab("Continuous Ranked Probability Score")
```

```{r density2D}

download.file("https://data.ecoforecast.org/targets/phenology/phenology-targets.csv.gz",
              "phenology-targets.csv.gz")

phenoDat <- read.csv("phenology-targets.csv.gz",header=TRUE)
sites <- unique(as.character(phenoDat$siteID))

ggplot(phenoDat, aes(x = gcc_90, y = rcc_90)) +
  geom_density_2d()+
  theme_classic()+
  ylab("Greenness Index") + 
  xlab("Redness Index")
```

## Quantile Dotplots

```{r qdotplot}

```

## Boxplot 

```{r boxplot, warning=FALSE}
ggplot(data = penguins) +
  geom_boxplot(aes(x = species, y = body_mass_g))

```

## Violin Plot

```{r violin, warning=FALSE}
ggplot(data = penguins) +
  geom_violin(aes(x = species, y = body_mass_g))
```

## Ridgeline Plot - Do we want geom_ridgeline() here instead?

```{r ridgeline, warning=FALSE}
ggplot(data = penguins) +
  geom_density_ridges(aes(x = body_mass_g, y = species))
```

## Scatterplot

```{r scatterplot, warning=FALSE}
ggplot(data = penguins) +
  geom_point(aes(x = flipper_length_mm, y = body_mass_g))
```

## Line graph

A basic line graph using data on Loblolly pine seed growth. Note that we filter the dataset to use the data from only one seedling:
```{r line}
ggplot(data = filter(Loblolly, Seed == 301)) +
  geom_line(aes(x = age, y = height))
```

We might want to show the points used to generate our line:
```{r line 2}
ggplot(data = filter(Loblolly, Seed == 301),
       aes(x = age, y = height)) +
  geom_line() +
  geom_point(color = "black", pch = 21, fill = "green")
```

Or, we may want to include all seedlings in our line graph, with separate lines for each:
```{r line 3}
ggplot(data = Loblolly,
       aes(x = age, y = height, color = Seed)) +
  geom_line()
```

```{r linepoint}

```

## Pairs plots and Correlograms

```{r pairs}

```

```{r corr}

```

## Barplots

The default for `geom_bar()` is to count the number of observations of the variable provided, in this case island. 
```{r barplot}
ggplot(data = penguins) +
  geom_bar(aes(x = island))
```

However, we can also create a small summary table if we want to, for example, plot averages by group. Below we plot the average body mass by island:
```{r barplot 2}
penguin_agg <- penguins %>%
  group_by(island) %>%
  summarise(mean_mass_g = mean(body_mass_g, na.rm = TRUE))

ggplot(data = penguin_agg) +
  geom_bar(aes(x = island, y = mean_mass_g), stat = "identity")
```

## Dotplot

```{r dotplot}

```

## Heatmap

```{r heatmap}

```

## Composite Plots

```{r composite}

```

```{r facet}

```
